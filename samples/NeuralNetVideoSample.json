{
    "Shader": {
        "ver": "0.1",
        "info": {
            "id": "tsjGzh",
            "date": "1548189203",
            "viewed": 22,
            "name": "NeuralNet video sample",
            "username": "Devestris",
            "description": "Neural net usage",
            "likes": 0,
            "published": 3,
            "flags": 0,
            "tags": [
                "net",
                "neural",
                "ycocg",
                "neuralnet"
            ],
            "hasliked": 0
        },
        "renderpass": [
            {
                "inputs": [
                    {
                        "id": 12,
                        "src": "/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm",
                        "ctype": "video",
                        "channel": 0,
                        "sampler": {
                            "filter": "linear",
                            "wrap": "clamp",
                            "vflip": "true",
                            "srgb": "false",
                            "internal": "byte"
                        },
                        "published": 1
                    }
                ],
                "outputs": [
                    {
                        "id": 37,
                        "channel": 0
                    }
                ],
                "code": "struct inputLayerStruct\n{ int out_depth; int depth;\n  float layer[576];\n  float biases[12]; };\n\nstruct outputLayerStruct\n{ int out_depth; int depth;\n  float layer[12];\n  float biases[1]; };\n\nconst int frame=4;\n    \ninputLayerStruct inputLayer = inputLayerStruct(12, 48,\n    float[576](-0.9050735235214233, -1.7265284061431885, -0.8416851758956909, 0.19779574871063232, -0.08398909866809845, -0.16501212120056152, -0.08810913562774658, 0.18051792681217194, 0.42926841974258423, 0.24710166454315186, 0.3816911578178406, 0.24274864792823792, -0.01089010201394558, -0.07289764285087585, 0.15761947631835938, -0.053161684423685074, -0.0001997251674765721, -0.005259909201413393, 0.017388947308063507, 0.030370159074664116, -0.1589103788137436, 0.03846350684762001, 0.11123190820217133, -0.16436484456062317, 0.013721521943807602, 0.16269591450691223, 0.19782030582427979, -0.17246274650096893, 0.054798923432826996, 0.00587301142513752, 0.050887156277894974, 0.10016048699617386, 0.1841401904821396, 0.1553002893924713, 0.0877523124217987, -0.00696477759629488, 0.3982025980949402, 0.38914355635643005, 0.23155631124973297, -0.10829245299100876, 0.14643505215644836, -0.08822828531265259, 0.11476925760507584, 0.19084137678146362, -0.0882672518491745, 0.15199033915996552, 0.15339957177639008, 0.05740434676408768,\n-0.8620867729187012, -1.5446785688400269, -0.7730752229690552, 0.0322183333337307, 0.006869691889733076, 0.08950212597846985, -0.05082996189594269, -0.12913089990615845, -0.1240643560886383, -0.17977778613567352, -0.14970648288726807, -0.08315734565258026, 0.0779075026512146, -0.01403143908828497, 0.05637634918093681, 0.14464348554611206, 0.06228088214993477, -0.08782993257045746, -0.004644354805350304, -0.02127585932612419, -0.008301686495542526, 0.03725457563996315, 0.022863948717713356, 0.04181792959570885, -0.0335816815495491, -0.10354558378458023, -0.1496148258447647, -0.02516949363052845, 0.011130268685519695, -0.005697306245565414, -0.0023372976575046778, -0.05981137230992317, -0.06652949005365372, -0.02868831343948841, -0.061774320900440216, 0.01524278149008751, -0.1407703161239624, -0.20308127999305725, -0.054848622530698776, 0.039642151445150375, 0.014452535659074783, 0.0965641587972641, -0.09790880978107452, 0.013491995632648468, -0.020825311541557312, -0.06100055202841759, -0.061913471668958664, 0.03138555958867073,\n-0.3131771981716156, 0.0002268850221298635, 0.04897079989314079, -0.3130212426185608, -0.006495686713606119, -0.10101187229156494, -0.00478345574811101, -0.14796435832977295, -0.19806158542633057, -0.07292286306619644, 0.026675919070839882, 0.13350610435009003, 0.38943594694137573, 0.10070440173149109, -0.06743748486042023, 0.10401905328035355, 0.09174203127622604, -0.29212215542793274, -0.168986514210701, 0.07002826035022736, -0.25779837369918823, -0.1299820989370346, -0.08991894125938416, 0.015628425404429436, -0.09981653094291687, -0.23337754607200623, 0.21962273120880127, 0.14160172641277313, 0.14861027896404266, -0.14833274483680725, -0.1730637103319168, -0.06065257266163826, -0.08540690690279007, -0.003420620458200574, -0.06441270560026169, -0.000002435233000142034, -0.1533951610326767, -0.17613263428211212, -0.005431693978607655, -0.17804667353630066, 0.01890072040259838, -0.022546153515577316, 0.02156091295182705, 0.2215127795934677, -0.07764202356338501, 0.2522909343242645, -0.05190824717283249, -0.1289658099412918,\n1.1081956624984741, 1.2202491760253906, 0.7861233353614807, 0.22914667427539825, 0.22999174892902374, -0.1265220046043396, -0.3020281195640564, -0.1006922721862793, -0.06508705019950867, -0.33088555932044983, -0.3430081903934479, -0.2772539556026459, -0.13083679974079132, 0.40075621008872986, 0.1300724297761917, 0.23162288963794708, -0.1855606883764267, -0.05097925662994385, -0.010886444710195065, -0.044213809072971344, -0.07961428910493851, 0.14369001984596252, -0.10409923642873764, 0.14082787930965424, -0.21835416555404663, -0.05925484001636505, -0.1690303385257721, -0.1275745928287506, -0.1690244972705841, 0.12371969223022461, 0.05755424126982689, -0.0923423245549202, -0.1632525622844696, -0.12276540696620941, -0.07461358606815338, 0.05653928220272064, -0.170832559466362, -0.4605764150619507, -0.40823373198509216, 0.047340571880340576, -0.10948019474744797, 0.23215584456920624, -0.033073071390390396, -0.04336682707071304, -0.04612506553530693, -0.34026721119880676, -0.07821306586265564, -0.14587758481502533,\n0.49721962213516235, 1.038270115852356, 0.3612329363822937, -0.40764421224594116, -0.14705125987529755, -0.2904551923274994, -0.03853309899568558, 0.013986868783831596, -0.33666935563087463, -0.18761874735355377, 0.09938661754131317, -0.003198241116479039, -0.36949974298477173, -0.46330150961875916, -0.07961148023605347, -0.23513340950012207, -0.13208405673503876, -0.10087786614894867, 0.1750331073999405, -0.03440241888165474, 0.3116092085838318, 0.08220212906599045, -0.10905633866786957, -0.03125980123877525, 0.09679261595010757, -0.33211907744407654, -0.07418406754732132, 0.22102412581443787, 0.0001129743322962895, 0.10189457982778549, -0.0396232046186924, 0.15587471425533295, -0.01926763914525509, -0.16954262554645538, -0.09727335721254349, 0.11154454946517944, 0.12256290018558502, -0.10789433866739273, -0.17436456680297852, -0.0020774591248482466, -0.07859642803668976, 0.08528859168291092, 0.007547640707343817, -0.01910206861793995, -0.17728745937347412, 0.06821922957897186, -0.08944001793861389, 0.16271725296974182,\n0.0023429058492183685, 0.00917911622673273, 0.0878266766667366, -0.11872219294309616, -0.20338688790798187, 0.18185439705848694, 0.14721634984016418, -0.1692207306623459, 0.2730751037597656, -0.18695949018001556, -0.2032555192708969, 0.06277460604906082, 0.1936773955821991, 0.07052376866340637, 0.10718146711587906, 0.16199342906475067, -0.13824477791786194, 0.10537344217300415, -0.10351543128490448, -0.08280766010284424, 0.021782636642456055, 0.05472063273191452, -0.06857768446207047, -0.09529145807027817, -0.04503938555717468, -0.13054853677749634, 0.07808251678943634, 0.01934351772069931, -0.16083858907222748, 0.04705888405442238, 0.0017717041773721576, -0.06703019142150879, -0.005907238926738501, -0.26094138622283936, 0.05599087476730347, 0.05081746727228165, -0.1378336101770401, -0.03164565563201904, -0.20605506002902985, -0.16009198129177094, 0.03596779704093933, 0.1187949925661087, -0.08251288533210754, -0.09528497606515884, -0.0005241406615823507, 0.0369294211268425, 0.24340862035751343, 0.0758613795042038,\n0.5128955841064453, 0.3955378532409668, 0.36749938130378723, 0.07026313245296478, 0.21130701899528503, 0.09407064318656921, -0.025989430025219917, 0.10609091818332672, -0.003114281687885523, 0.06845620274543762, -0.21178007125854492, -0.08470059931278229, -0.2890976667404175, -0.2870088517665863, -0.1877732276916504, -0.05023514851927757, -0.29362189769744873, 0.1429332196712494, 0.024687781929969788, -0.1636812537908554, 0.00002034273711615242, -0.06533631682395935, -0.2655784785747528, 0.11805439740419388, -0.23255866765975952, -0.19592098891735077, -0.02532009780406952, -0.10682547092437744, 0.10741373896598816, -0.005998814478516579, 0.07605022192001343, 0.23805482685565948, 0.18967361748218536, -0.06737745553255081, 0.04152116924524307, 0.22055724263191223, -0.422983318567276, 0.16483774781227112, -0.05401570349931717, -0.16360758244991302, -0.057313594967126846, -0.05231384560465813, -0.00013216114894021302, 0.06604716181755066, -0.044069211930036545, 0.12093181163072586, -0.29008978605270386, -0.22316965460777283,\n0.47036340832710266, 0.751912534236908, 0.3924126625061035, -0.03534245491027832, -0.03021305613219738, -0.2671336233615875, -0.0891188234090805, -0.13986022770404816, -0.05156632885336876, -0.0714983120560646, 0.08160232752561569, 0.07947983592748642, -0.00012932313256897032, 0.05985423922538757, -0.011247735470533371, -0.005216685589402914, -0.15026085078716278, -0.20606863498687744, 0.29369744658470154, -0.2401736080646515, -0.05181523784995079, -0.06399154663085938, -0.23707237839698792, 0.10761666297912598, 0.032527416944503784, -0.08135151118040085, 0.0011796940816566348, 0.11973460018634796, -0.07624570280313492, -0.16406552493572235, 0.0925183817744255, -0.10021118819713593, 0.2242293655872345, -0.18617191910743713, -0.040605783462524414, 0.00624875770881772, -0.13647520542144775, -0.23854349553585052, 0.23874732851982117, -0.09075510501861572, 0.04253800958395004, -0.11653624475002289, 0.07617177814245224, 0.14298167824745178, -0.10535366088151932, -0.12767335772514343, -0.38306307792663574, -0.06703532487154007,\n-0.7192953824996948, -0.8976038098335266, -0.8165804147720337, 0.3817177414894104, 0.2440139353275299, 0.07924692332744598, 0.11593878269195557, -0.19177362322807312, -0.08130735158920288, -0.3078729510307312, -0.04585939645767212, 0.08158013224601746, 0.4318406581878662, 0.24568243324756622, 0.16271249949932098, 0.25411874055862427, -0.03416267782449722, 0.13048236072063446, -0.047235846519470215, 0.0415385477244854, -0.1858106404542923, 0.13562895357608795, 0.08287442475557327, 0.2651998996734619, -0.01147543452680111, -0.15554289519786835, -0.10607319325208664, -0.18672814965248108, 0.10721003264188766, 0.01741909608244896, 0.005607374012470245, 0.012122349813580513, -0.23861390352249146, -0.12724362313747406, 0.08230377733707428, 0.1943715363740921, -0.1685553789138794, 0.016521597281098366, -0.0826273038983345, 0.1916074901819229, 0.16157318651676178, 0.03730322793126106, -0.037941738963127136, 0.00864148885011673, 0.11607962846755981, -0.25048908591270447, 0.15699760615825653, -0.01739264465868473,\n-0.034538500010967255, -0.040795885026454926, 0.16635924577713013, 0.17116005718708038, 0.17229560017585754, 0.022095220163464546, 0.013308126479387283, -0.00717987772077322, -0.01530351024121046, -0.1430855691432953, 0.17659802734851837, -0.20414121448993683, -0.23783279955387115, -0.08601302653551102, 0.12319933623075485, -0.027557918801903725, -0.15001070499420166, -0.35994160175323486, -0.13797509670257568, 0.2774924039840698, 0.22389380633831024, 0.09291914105415344, -0.22206608951091766, -0.00799426157027483, -0.0056516737677156925, -0.03435088321566582, -0.00817997194826603, 0.12141536921262741, -0.25153666734695435, -0.06858819723129272, -0.07202579826116562, 0.08738648146390915, -0.15823675692081451, -0.2742721438407898, -0.31527847051620483, -0.038354046642780304, -0.23412954807281494, -0.03561680018901825, -0.27065324783325195, -0.02737235650420189, 0.0111854188144207, 0.0985729917883873, 0.08848407864570618, 0.03329836577177048, 0.048908691853284836, -0.21742741763591766, -0.057094756513834, 0.03712513670325279,\n1.5436886548995972, 2.9976253509521484, 1.6333271265029907, -0.0951610878109932, 0.034708622843027115, -0.17512336373329163, 0.028541378676891327, 0.3236455023288727, 0.11676047742366791, 0.12206079065799713, 0.33426427841186523, 0.22237814962863922, -0.21313373744487762, -0.031593069434165955, -0.006628561299294233, 0.01095353253185749, -0.12054533511400223, 0.03467395156621933, 0.179024338722229, -0.18244333565235138, -0.02019583061337471, -0.012933135032653809, -0.09041696041822433, -0.055344317108392715, 0.03935985639691353, 0.4189457595348358, 0.011402366682887077, 0.08626066893339157, -0.09569452702999115, 0.09235590696334839, 0.04602232202887535, -0.15611030161380768, 0.3154323697090149, 0.00027815843350254, 0.15717212855815887, -0.04480854049324989, 0.10748404264450073, 0.3884929418563843, 0.2725163400173187, 0.08069954067468643, -0.16745580732822418, -0.14213591814041138, 0.11928296834230423, 0.1021806076169014, -0.08386674523353577, 0.05096185952425003, 0.20553947985172272, -0.015506293624639511,\n-0.16890786588191986, 0.07577361911535263, 0.09057580679655075, -0.19580797851085663, -0.06812111288309097, 0.21833208203315735, -0.026662465184926987, -0.10109271109104156, 0.08045383542776108, 0.00945319514721632, -0.06698041409254074, -0.04004790633916855, -0.30023372173309326, -0.13295967876911163, -0.06529702991247177, -0.23287919163703918, 0.09658649563789368, 0.07723093032836914, 0.16118666529655457, -0.08081655204296112, -0.17778140306472778, 0.05508805066347122, -0.055905941873788834, 0.06809944659471512, -0.034762635827064514, 0.3567098081111908, 0.09142802655696869, 0.1616559475660324, -0.09927213937044144, 0.2143349051475525, -0.008939963765442371, -0.16681818664073944, -0.189946249127388, 0.2845930755138397, -0.12286583334207535, -0.05648147314786911, -0.13278567790985107, -0.005543796345591545, 0.2161960005760193, -0.21605290472507477, -0.10899529606103897, -0.009039437398314476, 0.05228540301322937, 0.021602926775813103, -0.2546893060207367, -0.11159093677997589, 0.018196584656834602, 0.010262420400977135),\n    float[12](-0.13908520340919495, 2.6109352111816406, -0.017520295456051826, -0.10222125053405762, 0.05091337114572525, 0.027678189799189568, -0.25091108679771423, -0.24746084213256836, 0.2891407012939453, -0.04901503771543503, -4.970816135406494, 0.050677623599767685)\n);\n    \noutputLayerStruct outputLayer = outputLayerStruct(1, 12,\n\tfloat[12](-0.08944849669933319, -0.22483831644058228, 0.5053628087043762, 0.07757216691970825, 0.0736582800745964, 0.041013482958078384, -0.05861513689160347, -0.054947685450315475, 0.04998943582177162, 0.17735733091831207, 0.12314306944608688, 0.04274908825755119),\n\tfloat[1](0.5894482135772705)\n);\n\n#define rgb2YCoCg(x) (x*mat3(0.25, 0.5, 0.25, 0.5, 0, -0.5, -0.25, 0.5, -0.25))\n#define YCoCg2rgb(x) (x*mat3(1,1,-1,1,0,1,1,-1,-1))\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec2 ed = 1.0 / iChannelResolution[0].xy;\n    vec3 col = texture(iChannel0, uv.xy).rgb;\n\n    vec3 YCoCg = rgb2YCoCg(col);\n\n//MATRIX    \n    vec3 rgb;\n    float inputData[frame*frame*3];\n    \n    int offset=0;\n    for (int h=0; h<frame; h++)\n      for (int w=0; w<frame; w++) {\n        rgb = texture(iChannel0, vec2(uv.x+ed.x*float(w), uv.y+ed.y*float(h))).rgb;\n        inputData[offset++]=rgb.r; \n        inputData[offset++]=rgb.g;\n        inputData[offset++]=rgb.b;\n      }\n    \n    float iSum[12];\n    for (int h=0; h<inputLayer.out_depth; h++) {\n      iSum[h]=inputLayer.biases[h];\n      for (int w=0; w<inputLayer.depth; w++) {\n          iSum[h]+=inputData[w]*inputLayer.layer[h*inputLayer.depth+w];\n\n    \t}\n      if (iSum[h]<0.0) iSum[h]=0.0; //ReLu\n    }\n    \n    float sum = outputLayer.biases[0];\n    for (int w=0; w<outputLayer.depth; w++) {\n        sum+=iSum[w]*outputLayer.layer[w];\n    }\n//END MATRIX\n\n    YCoCg.r = pow(sum,1./1.25);     //Gamma\n    YCoCg.g = pow(YCoCg.g,1./0.75); //Whitepoint\n\trgb = YCoCg2rgb(YCoCg);\n  \t\n//    fragColor = vec4(vec3(YCoCg.g+0.5), 1.0);\n    fragColor = vec4(uv.x>0.5?rgb:col, 1.0);\n}\n",
                "name": "Image",
                "description": "",
                "type": "image"
            }
        ]
    }
}